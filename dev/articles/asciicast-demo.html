<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>asciicast example vignette • asciicast</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="asciicast example vignette">
<meta name="robots" content="noindex">
<script defer data-domain="/asciicast.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">asciicast</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.3.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/asciicast-demo.html">asciicast example vignette</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/asciicast/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>asciicast example vignette</h1>
                        <h4 data-toc-skip class="author">Gábor
Csárdi</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/asciicast/blob/main/vignettes/asciicast-demo.Rmd" class="external-link"><code>vignettes/asciicast-demo.Rmd</code></a></small>
      <div class="d-none name"><code>asciicast-demo.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is an example vignette for creating asciinema screen casts. To
include a screencast in your document, you need to do two steps. The
first is to initialize the asciicast engine:</p>
<pre><code>```{r echo = FALSE, results = "hide", purl = FALSE}
asciicast::init_knitr_engine()
```</code></pre>
<p>After this, for the chunks that you want to display in an asciinema
player, use the asciicast engine:</p>
<pre><code>```{asciicast}
# This will be an ascii cast
# Let's evaluate some code
head(mtcars)
```</code></pre>
<p>This will produce the following cast:</p>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000">
<pre>
## &gt; # This will be an ascii cast                                                  
## &gt; # Let's evaluate some code                                                    
## &gt; head(mtcars)                                                                  
##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb            
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4            
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4            
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1            
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1            
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2            
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1            
</pre>
</div>
</div>
<div class="section level2">
<h2 id="changing-parameters">Changing parameters<a class="anchor" aria-label="anchor" href="#changing-parameters"></a>
</h2>
<p>You can include a DCF header in the asciicast, to set some
parameters, e.g. the height of the widget.</p>
<pre><code>```{asciicast}
#' Rows: 5

# No much here, so avoid a big widget
1 + 2 + 3 + 4
```</code></pre>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000">
<pre>
## &gt; # Not much here, so avoid a big widget                                        
## &gt; 1 + 2 + 3 + 4                                                                 
## [1] 10                                                                          
##                                                                                 
##                                                                                 
</pre>
</div>
</div>
<div class="section level2">
<h2 id="caching">Caching<a class="anchor" aria-label="anchor" href="#caching"></a>
</h2>
<p>Recording the asciinema casts might take long, as everything happens
in real time. You can tell knitr to cache the results, as long as the
code of the chunk is unchanged. E.g. the previous chunk with caching
looks like this:</p>
<pre><code>```{asciicast cache = TRUE}
#' Rows: 5

# Not much here, so avoid a big widget
1 + 2 + 3 + 4
```</code></pre>
</div>
<div class="section level2">
<h2 id="casting-a-script-from-a-file">Casting a script from a file<a class="anchor" aria-label="anchor" href="#casting-a-script-from-a-file"></a>
</h2>
<p>It is possible to read the R code of a cast from a file, instead of
specifying it in the code chunk. The advantage of this is that it is
easier to use the code in the R scripts for other purposes.</p>
<pre><code>```{asciicast code = readLines("../inst/examples/hello.R")}
```</code></pre>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000">
<pre>
## &gt; print("Hello world!")                                                         
## [1] "Hello world!"                                                              
</pre>
</div>
</div>
<div class="section level2">
<h2 id="using-svg-files">Using SVG files<a class="anchor" aria-label="anchor" href="#using-svg-files"></a>
</h2>
<p>Sometimes the asciinema player widget cannot be used, because custom
JavaScript code is forbidden on the page. A common example is README
(and other) markdown files on GitHub. acsiicast can also use animated
SVG images instead of the asciinema player HTML widget. For this set the
<code>asciicast_knitr_svg</code> option to <code>TRUE</code>, or the
<code>ASCIICAST_KNITR_SVG</code> environment variable to
<code>TRUE</code>. (The former takes precedence if both are set.)</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>asciicast_knitr_svg <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>```{asciicast}
#' Rows: 3
cli::rule(center = "TITLE", line = "~-", line_col = "blue")
```</code></pre>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000">
<pre>
## &gt; cli::rule(center = "TITLE", line = "~-", line_col = "blue")                   
## <span style="color: #268BD2;">~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~</span> TITLE <span style="color: #268BD2;">~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>
##                                                                                 
</pre>
</div>
<p>You can also use SVG files to show still screenshots, with the state
of the screen after running the R code.</p>
<pre><code>```{asciicast}
#' Rows: 3
#' At: end
#' Window: FALSE
#' Padding: 10
#' Cursor: FALSE
cli::rule(center = "TITLE", line = "~-", line_col = "blue")
```</code></pre>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000">
<pre>
## &gt; cli::rule(center = "TITLE", line = "~-", line_col = "blue")                     
## <span style="color: #268BD2;">~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~</span> TITLE <span style="color: #268BD2;">~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-</span>  
##                                                                                   
</pre>
</div>
</div>
<div class="section level2">
<h2 id="showing-the-code">Showing the code<a class="anchor" aria-label="anchor" href="#showing-the-code"></a>
</h2>
<p>By default asciicast code chunks do not show the code, i.e. the
<code>echo</code> kntr option is set to <code>FALSE</code> for them. You
can override this locally for a code chunk, or globally, by supplying
the <code>echo</code> argument to
<code><a href="../reference/init_knitr_engine.html">asciicast::init_knitr_engine()</a></code>.</p>
<pre><code>```{asciicast echo = TRUE}
#' Rows: 5
#' At: end
# This code will be shown
head(mtcars, 3)
```</code></pre>
<p>This will show the code above the SVG image. The header is not
shown:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This code will be shown</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000">
<pre>
## &gt; head(mtcars, 3)                                                               
##                mpg cyl disp  hp drat    wt  qsec vs am gear carb                
## Mazda RX4     21.0   6  160 110 3.90 2.620 16.46  0  1    4    4                
## Mazda RX4 Wag 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4                
## Datsun 710    22.8   4  108  93 3.85 2.320 18.61  1  1    4    1                
</pre>
</div>
</div>
<div class="section level2">
<h2 id="cpp11-integration">cpp11 integration<a class="anchor" aria-label="anchor" href="#cpp11-integration"></a>
</h2>
<p>Use the <code>asciicastcpp11</code> knitr engine to compile cpp11
functions in the asciicast subprocess:</p>
<pre><code>```{asciicastcpp11}
double mean_cpp(doubles x) {
  int n = x.size();
  double total = 0;
  for (double value : x) {
     total += value;
  }
  return total / n;
}
```</code></pre>
<p>Then you can use these functions in regular <code>asciicast</code>
chunks:</p>
<pre><code>```{asciicast}
mean_cpp(1:10000*1.0)
```</code></pre>
<div class="asciicast" style="color: #172431;font-family: 'Fira Code',Monaco,Consolas,Menlo,'Bitstream Vera Sans Mono','Powerline Symbols',monospace;line-height: 1.300000">
<pre>
## &gt; mean_cpp(1:10000*1.0)                                                         
## [1] 5000.5                                                                      
</pre>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gaborcsardi" class="external-link">Gábor Csárdi</a>, Romain Francois, Mario Nebl, Marcin Kulik, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

  </div></footer>
</body>
</html>
